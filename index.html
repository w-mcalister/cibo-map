<!DOCTYPE html>
<html>
<head>
	
	<title>CIBO Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	<link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />
    <script src="paddocks.js" ></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>


	
</head>
<body>



<div id="mapid" style="width: 100%; height: 800px;"></div>
<script>

	var mymap = L.map('mapid').setView([-35.202108, 149.625924], 12);

	var mapbox = L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
		maxZoom: 18,
		attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
			'<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
			'Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
		id: 'mapbox/streets-v11',
		tileSize: 512,
		zoomOffset: -1
	});
    
    var Esri_WorldTopoMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}', {
	   attribution: 'Tiles &copy; Esri &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community'
    });

    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
	   attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
    });

    Esri_WorldTopoMap.addTo(mymap)
    
        // Add base layers
        var basemaps = {
            "Map Box": mapbox,
            "ESRI topo": Esri_WorldTopoMap,
            "ESRI imagery": Esri_WorldImagery,
        }
        
        var controlLayers = L.control.layers(basemaps, {}, {
            collapsed: false
        }).addTo(mymap);
    
        // Overlay layers (TMS)
        var disp = L.tileLayer('https://data.cibolabs.com/d46424fa5e0b11f9c91ceab149a879eece1f0cb4c763f9faa2d3b1b144547c14/DISP/{z}/{x}/{y}.png', {
            tms: true,
            opacity: 0.9,
            attribution: '&copy; <a href="https://www.cibolabs.com.au" target="_blank">CiboLabs</a>'
        });
        controlLayers.addOverlay(disp, 'CiboLabs Display ')
        var fc = L.tileLayer('https://data.cibolabs.com/d46424fa5e0b11f9c91ceab149a879eece1f0cb4c763f9faa2d3b1b144547c14/FC/{z}/{x}/{y}.png', {
            tms: true,
            opacity: 0.9,
            attribution: '&copy; <a href="https://www.cibolabs.com.au" target="_blank">CiboLabs</a>'
        });
        controlLayers.addOverlay(fc, 'CiboLabs Fractional Cover ')
        var ndvi = L.tileLayer('https://data.cibolabs.com/d46424fa5e0b11f9c91ceab149a879eece1f0cb4c763f9faa2d3b1b144547c14/NDVI/{z}/{x}/{y}.png', {
            tms: true,
            opacity: 0.9,
            attribution: '&copy; <a href="https://www.cibolabs.com.au" target="_blank">CiboLabs</a>'
        });
        controlLayers.addOverlay(ndvi, 'CiboLabs NDVI ')
        var tsdm = L.tileLayer('https://data.cibolabs.com/d46424fa5e0b11f9c91ceab149a879eece1f0cb4c763f9faa2d3b1b144547c14/TSDM/{z}/{x}/{y}.png', {
            tms: true,
            opacity: 0.9,
            attribution: '&copy; <a href="https://www.cibolabs.com.au" target="_blank">CiboLabs</a>'
        });
        controlLayers.addOverlay(tsdm, 'CiboLabs TSDM ')
        var change = L.tileLayer('https://data.cibolabs.com/d46424fa5e0b11f9c91ceab149a879eece1f0cb4c763f9faa2d3b1b144547c14/CHANGE30/{z}/{x}/{y}.png', {
            tms: true,
            opacity: 0.9,
            attribution: '&copy; <a href="https://www.cibolabs.com.au" target="_blank">CiboLabs</a>'
        });
        controlLayers.addOverlay(change, 'CiboLabs Monthly Change ')
    
    ndvi.addTo(mymap)
    
    
    // Load the geojson file
        var DurallaPaddockLayer = L.geoJson(DurallaPaddocks, {
            style: function(feature) {
                var fillColor, fillColor = "#ffffff"; // no data
                return {
                    'color': 'red',
                    'weight': 0.5,
                    'fillColor': fillColor, // sorts by method above
                    'fillOpacity': 0.0
                }
            },
            onEachFeature: function(feature, layer) {
                var paddockName = feature.properties.name;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.name;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Name;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.field;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.FIELD;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Field;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.TITLE;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.title;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Title;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.FARM;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.farm;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Farm;
                if (typeof paddockName == 'undefined') paddockName = 'Paddock';
              
                var popupText = "<center><b>" + paddockName + "</b></center>" +
                    "Size: " + 
                    (Math.round(feature.properties.hectares * 100) / 100) +  " ha"
                layer.bindPopup(popupText);
            }
        });
    
    DurallaPaddockLayer.addTo(mymap)
    
        var THFPaddockLayer = L.geoJson(THFPaddoks, {
            style: function(feature) {
                var fillColor, fillColor = "#ffffff"; // no data
                return {
                    'color': 'red',
                    'weight': 0.5,
                    'fillColor': fillColor, // sorts by method above
                    'fillOpacity': 0.0
                }
            },
            onEachFeature: function(feature, layer) {
                var paddockName = feature.properties.name;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.name;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Name;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.field;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.FIELD;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Field;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.TITLE;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.title;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Title;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.FARM;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.farm;
                if (typeof paddockName == 'undefined') paddockName = feature.properties.Farm;
                if (typeof paddockName == 'undefined') paddockName = 'Paddock';
              
                var popupText = "<center><b>" + paddockName + "</b></center>" +
                    "Size: " + 
                    (Math.round(feature.properties.hectares * 100) / 100) +  " ha"
                layer.bindPopup(popupText);
            }
        });

    THFPaddockLayer.addTo(mymap)
    
/*	L.marker([51.5, -0.09]).addTo(mymap)
		.bindPopup("<b>Hello world!</b><br />I am a popup.").openPopup();

	L.circle([51.508, -0.11], 500, {
		color: 'red',
		fillColor: '#f03',
		fillOpacity: 0.5
	}).addTo(mymap).bindPopup("I am a circle.");

	L.polygon([
		[51.509, -0.08],
		[51.503, -0.06],
		[51.51, -0.047]
	]).addTo(mymap).bindPopup("I am a polygon.");
*/

	var popup = L.popup();

	function onMapClick(e) {
		popup
			.setLatLng(e.latlng)
			.setContent("You clicked the map at " + e.latlng.toString())
			.openOn(mymap);
	}

	mymap.on('click', onMapClick);

</script>



</body>
</html>